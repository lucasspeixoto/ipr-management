<app-layout>
  <ng-container *ngIf="userId$ | async"></ng-container>
  <ng-container *ngIf="personalData$ | async"></ng-container>
  <ng-container *ngIf="supplementaryData$ | async"></ng-container>

  <mat-stepper #stepper class="register">
    <!-- * --------------- Dados Pessoais --------------- -->
    <mat-step [stepControl]="personalForm" errorMessage="Envio não realizado!">
      <form [formGroup]="personalForm" class="register__form">
        <ng-template matStepLabel>Dados Pessoais</ng-template>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="name">Nome</mat-label>
          <input matInput type="text" formControlName="name" required />
          <mat-icon matSuffix>person_add</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="name"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="email">E-mail</mat-label>
          <input matInput readonly type="text" placeholder="E-mail" formControlName="email" />
          <mat-icon matSuffix>email</mat-icon>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="sex">Sexo</mat-label>
          <mat-select formControlName="sex">
            <mat-option *ngFor="let sex of sexOptions" [value]="sex.value">{{
              sex.viewValue
            }}</mat-option>
          </mat-select>
          <mat-icon matSuffix>people</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="sex"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="birth_date">Data de Nascimento</mat-label>
          <input matInput [matDatepicker]="birth_date_picker" formControlName="birth_date" />

          <mat-datepicker-toggle matSuffix [for]="birth_date_picker"></mat-datepicker-toggle>
          <mat-datepicker #birth_date_picker color="primary"></mat-datepicker>
          <mat-error
            ><app-custom-validation-message
              controlName="birth_date"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="cep">CEP</mat-label>
          <input
            matInput
            placeholder="CEP"
            formControlName="cep"
            (blur)="getAddressDataHandler()"
            required />
          <mat-icon matSuffix> add_location</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="cep"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="address">Endereço</mat-label>
          <input matInput placeholder="Endereço" formControlName="address" required />
          <mat-icon matSuffix> location_on</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="address"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="district">Bairro</mat-label>
          <input matInput placeholder="Bairro" formControlName="district" required />
          <mat-icon matSuffix> location_on</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="district"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label>Complemento</mat-label>
          <input
            matInput
            placeholder="Complemento"
            formControlName="complement"
            required
            maxLength="50" />
          <mat-icon matSuffix> location_on</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="complement"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="city">Cidade</mat-label>
          <input matInput placeholder="Cidade" formControlName="city" required />
          <mat-icon matSuffix>location_city</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="city"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="state">Estado</mat-label>
          <input matInput placeholder="Estado" formControlName="state" required maxlength="2" />
          <mat-icon matSuffix> location_on</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="state"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="number">Número</mat-label>
          <input matInput type="text" placeholder="Número" formControlName="number" required />
          <mat-error
            ><app-custom-validation-message controlName="number"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="rg">RG</mat-label>
          <input matInput type="number" placeholder="RG" formControlName="rg" required />
          <mat-error
            ><app-custom-validation-message controlName="rg"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="cpf">CPF</mat-label>
          <input matInput type="number" placeholder="CPF" formControlName="cpf" required />

          <mat-error
            ><app-custom-validation-message controlName="cpf"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="number">Celular</mat-label>
          <input
            matInput
            type="number"
            placeholder="Celular"
            formControlName="cellphone"
            required
            maxLength="11" />
          <mat-icon matSuffix>phone_android</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="cellphone"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="number">Telefone</mat-label>
          <input
            matInput
            type="number"
            placeholder="Telefone"
            formControlName="telephone"
            required />
          <mat-icon matSuffix>phone</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="telephone"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="naturalness">Naturalidade</mat-label>
          <input matInput placeholder="Naturalidade" formControlName="naturalness" required />
          <mat-icon matSuffix>flag</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="naturalness"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>
      </form>
      <div class="register__actions">
        <button
          class="app-button"
          mat-raised-button
          matStepperNext
          color="primary"
          type="button"
          (click)="sendPersonalDataHandler()"
          [disabled]="personalForm.invalid">
          Salvar
        </button>
      </div>
      <br />
      {{ personalForm.value | json }}
    </mat-step>

    <!-- * --------------- Dados Complementares --------------- -->
    <mat-step [stepControl]="supplementaryForm" errorMessage="Envio não realizado!">
      <form [formGroup]="supplementaryForm" class="register__form">
        <ng-template matStepLabel>Dados Complementares</ng-template>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="marital_status">Estado Civil</mat-label>
          <mat-select formControlName="marital_status">
            <mat-option *ngFor="let status of maritalOptions" [value]="status.value">{{
              status.viewValue
            }}</mat-option>
          </mat-select>
          <mat-icon matSuffix>people_outline</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="marital_status"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="spouse_name">Nome do Cônjuge</mat-label>
          <input matInput placeholder="Nome do Cônjuge" formControlName="spouse_name" required />
          <mat-icon matSuffix>person_add</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="spouse_name"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="wedding_date">Data de Casamento</mat-label>
          <input matInput [matDatepicker]="wedding_date_picker" formControlName="wedding_date" />
          <mat-datepicker-toggle matSuffix [for]="wedding_date_picker"></mat-datepicker-toggle>
          <mat-datepicker #wedding_date_picker color="primary"></mat-datepicker>
          <mat-error
            ><app-custom-validation-message
              controlName="wedding_date"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="schooling">Escolaridade</mat-label>
          <mat-select formControlName="schooling">
            <mat-option *ngFor="let schooling of schoolingOptions" [value]="schooling.value">{{
              schooling.viewValue
            }}</mat-option>
          </mat-select>
          <mat-icon matSuffix>school</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="schooling"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="profession">Profissão</mat-label>
          <input
            matInput
            placeholder="Profissão"
            formControlName="profession"
            required
            minlength="3" />
          <mat-icon matSuffix>work</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="profession"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="father_name">Nome do Pai</mat-label>
          <input
            matInput
            placeholder="Nome do Pai"
            formControlName="father_name"
            required
            minlength="3" />
          <mat-icon matSuffix>person_outline</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="father_name"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="mother_name">Nome da mãe</mat-label>
          <input
            matInput
            placeholder="Nome da mãe"
            formControlName="mother_name"
            required
            minlength="3" />
          <mat-icon matSuffix>person_outline</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="mother_name"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>
      </form>

      <div class="register__actions">
        <button
          class="app-button"
          mat-raised-button
          matStepperPrevious
          color="warn"
          type="button"
          [disabled]="false">
          Voltar
        </button>

        <button
          class="app-button"
          mat-raised-button
          matStepperNext
          color="primary"
          type="button"
          [disabled]="supplementaryForm.invalid"
          (click)="sendSupplementaryDataHandler()">
          Salvar
        </button>
      </div>
    </mat-step>

    <!-- * --------------- Dados Eclesiásticos --------------- -->
    <mat-step [stepControl]="ecclesiasticalForm" errorMessage="Envio não realizado!">
      <form [formGroup]="ecclesiasticalForm" class="register__form">
        <ng-template matStepLabel>Dados Eclesiásticos</ng-template>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="membership">Membresia</mat-label>
          <mat-select formControlName="membership">
            <mat-option *ngFor="let membership of membershipOptions" [value]="membership.value">{{
              membership.viewValue
            }}</mat-option>
          </mat-select>
          <mat-icon matSuffix>people_outline</mat-icon>
          <mat-error
            ><app-custom-validation-message
              controlName="membership"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="container__form-input" color="accent" appearance="fill">
          <mat-label for="craft">Membresia</mat-label>
          <mat-select formControlName="craft">
            <mat-option *ngFor="let craft of craftOptions" [value]="craft.value">{{
              craft.viewValue
            }}</mat-option>
          </mat-select>
          <mat-icon matSuffix>people_outline</mat-icon>
          <mat-error
            ><app-custom-validation-message controlName="craft"></app-custom-validation-message>
          </mat-error>
        </mat-form-field>
      </form>

      <div class="register__actions">
        <button
          class="app-button"
          mat-raised-button
          matStepperPrevious
          color="warn"
          type="button"
          [disabled]="false">
          Voltar
        </button>

        <button
          class="app-button"
          mat-raised-button
          matStepperNext
          color="primary"
          type="button"
          [disabled]="supplementaryForm.invalid"
          (click)="sendSupplementaryDataHandler()">
          Salvar
        </button>
      </div>
    </mat-step>
  </mat-stepper>
</app-layout>
